{% extends theme('layout-my-account.html') %}

{% from 'utils.html' import render_field %}

{% block account_content %}
  <h1>Edit address</h1>
  <br/>
  <form class="form form-register client-validate" method="POST" action="" role="form">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    {% for field in form %}
      {{ render_field(field) }}
    {% endfor %}
    <button class="btn btn-success btn-submit" data-loading-text="Loading..." type="submit">Save Address</button>
  </form>
{% endblock account_content %}

{% block js %}
  {{ super() }}
  <script src="{{ url_for('user.static', filename='libs/jquery-validation/dist/jquery.validate.min.js') }}"></script>
  <script src="{{ url_for('user.static', filename='js/address-form.js') }}"></script>
  <script>
    $(document).ready( function () {
      // Select subdivision from address
      $("select#subdivision").change(function () {
        $("select#subdivision option[value='{{ address.subdivision.id }}']").attr('selected', true);
      });
    });
  </script>
{% endblock js %}
